import{_ as s,c as n,o as a,d as l}from"./app.040e86db.js";const A=JSON.parse('{"title":"How to use signin and signup","description":"","frontmatter":{},"headers":[{"level":2,"title":"Start InMemory Server","slug":"start-inmemory-server","link":"#start-inmemory-server","children":[]},{"level":2,"title":"Option 1: SCHEMAFULL","slug":"option-1-schemafull","link":"#option-1-schemafull","children":[]},{"level":2,"title":"Option 2: SCHEMALESS","slug":"option-2-schemaless","link":"#option-2-schemaless","children":[]},{"level":2,"title":"Test signin and signup with Javascript surrealdb.js integration","slug":"test-signin-and-signup-with-javascript-surrealdb-js-integration","link":"#test-signin-and-signup-with-javascript-surrealdb-js-integration","children":[{"level":3,"title":"Signup a new user","slug":"signup-a-new-user","link":"#signup-a-new-user","children":[]},{"level":3,"title":"Signin an existing user","slug":"signin-an-existing-user","link":"#signin-an-existing-user","children":[]}]}],"relativePath":"tutorials/signin_and_signup.md","lastUpdated":1667334123000}'),p={name:"tutorials/signin_and_signup.md"},o=l(`<h1 id="how-to-use-signin-and-signup" tabindex="-1">How to use signin and signup <a class="header-anchor" href="#how-to-use-signin-and-signup" aria-hidden="true">#</a></h1><p><strong>As a developer you have complete control over the signup and signin functionality...</strong></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Tutorial by <a href="https://github.com/koakh" target="_blank" rel="noreferrer">Koakh</a> from <a href="https://github.com/tobiemh" target="_blank" rel="noreferrer">Tobie</a> code snippet</p></div><h2 id="start-inmemory-server" tabindex="-1">Start InMemory Server <a class="header-anchor" href="#start-inmemory-server" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">surreal start --log trace --user root --pass root</span></span>
<span class="line"></span></code></pre></div><h2 id="option-1-schemafull" tabindex="-1">Option 1: SCHEMAFULL <a class="header-anchor" href="#option-1-schemafull" aria-hidden="true">#</a></h2><p>launch surreal REPL to connect to local SurrealDB server instance</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">surreal sql --conn http://localhost:8000 --user root --pass root --ns </span><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;"> --db </span><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;"> --pretty</span></span>
<span class="line"></span></code></pre></div><p>now paste bellow surrealQL code block to create the <strong>SCHEMAFULL</strong> scheme</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">---define SCHEMAFULL and PERMISSIONS</span></span>
<span class="line"><span style="color:#A6ACCD;">DEFINE </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> user SCHEMAFULL</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">PERMISSIONS</span></span>
<span class="line"><span style="color:#A6ACCD;">    FOR </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> $auth.id, </span></span>
<span class="line"><span style="color:#A6ACCD;">    FOR </span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NONE</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;">--- define FIELD&#39;s</span></span>
<span class="line"><span style="color:#A6ACCD;">DEFINE FIELD user </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> user </span><span style="color:#F78C6C;">TYPE</span><span style="color:#A6ACCD;"> string;</span></span>
<span class="line"><span style="color:#A6ACCD;">DEFINE FIELD pass </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> user </span><span style="color:#F78C6C;">TYPE</span><span style="color:#A6ACCD;"> string;</span></span>
<span class="line"><span style="color:#A6ACCD;">DEFINE FIELD settings.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> user </span><span style="color:#F78C6C;">TYPE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">object</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">DEFINE FIELD settings.marketing </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> user </span><span style="color:#F78C6C;">TYPE</span><span style="color:#A6ACCD;"> string;</span></span>
<span class="line"><span style="color:#A6ACCD;">DEFINE FIELD tags </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> user </span><span style="color:#F78C6C;">TYPE</span><span style="color:#A6ACCD;"> array;</span></span>
<span class="line"><span style="color:#676E95;">--- define INDEX&#39;s</span></span>
<span class="line"><span style="color:#A6ACCD;">DEFINE </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> idx_user </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> user COLUMNS user </span><span style="color:#F78C6C;">UNIQUE</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- define SCOPE</span></span>
<span class="line"><span style="color:#A6ACCD;">DEFINE SCOPE allusers</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">-- the JWT session will be valid for 14 days</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SESSION</span><span style="color:#A6ACCD;"> 14d</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">-- The optional SIGNUP clause will be run when calling the signup method for this scope</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">-- It is designed to create or add a new record to the database.</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">-- If set, it needs to return a record or a record id</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">-- The variables can be passed in to the signin method</span></span>
<span class="line"><span style="color:#A6ACCD;">  SIGNUP ( </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> user </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> settings.marketing </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> $marketing, user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> $user, pass </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> crypto::argon2::generate($pass), tags </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> $tags )</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">-- The optional SIGNIN clause will be run when calling the signin method for this scope</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">-- It is designed to check if a record exists in the database.</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">-- If set, it needs to return a record or a record id</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">-- The variables can be passed in to the signin method</span></span>
<span class="line"><span style="color:#A6ACCD;">  SIGNIN ( </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> user </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> $user </span><span style="color:#F78C6C;">AND</span><span style="color:#A6ACCD;"> crypto::argon2::compare(pass, $pass) )</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">-- this optional clause will be run when calling the signup method for this scope</span></span>
<span class="line"></span></code></pre></div><p>check info db in REPL</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> INFO FOR DB</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">result</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dl</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: {},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: {},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">sc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">allusers</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DEFINE SCOPE allusers SESSION 2w SIGNUP (CREATE user SET settings.marketing = </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">marketing</span><span style="color:#C3E88D;">, user = </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">user</span><span style="color:#C3E88D;">, pass = crypto::argon2::generate(</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">pass</span><span style="color:#C3E88D;">), tags = </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">tags</span><span style="color:#C3E88D;">) SIGNIN (SELECT * FROM user WHERE user = </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">user</span><span style="color:#C3E88D;"> AND crypto::argon2::compare(pass, </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">pass</span><span style="color:#C3E88D;">))</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">tb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DEFINE TABLE user SCHEMAFULL PERMISSIONS FOR select WHERE id = </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">auth</span><span style="color:#C3E88D;">.id, FOR create NONE, FOR update WHERE id = </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">auth</span><span style="color:#C3E88D;">.id, FOR delete NONE</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">status</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">OK</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">time</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">153.601\xB5s</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h2 id="option-2-schemaless" tabindex="-1">Option 2: SCHEMALESS <a class="header-anchor" href="#option-2-schemaless" aria-hidden="true">#</a></h2><p>another nice option suggested by <a href="https://gist.github.com/georgyo" target="_blank" rel="noreferrer">George Shammas / georgyo</a></p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">DEFINE SCOPE allusers </span></span>
<span class="line"><span style="color:#F78C6C;">SESSION</span><span style="color:#A6ACCD;"> 14d</span></span>
<span class="line"><span style="color:#A6ACCD;">SIGNUP (</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">type</span><span style="color:#A6ACCD;">::thing(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, string::lowercase(string::</span><span style="color:#82AAFF;">trim</span><span style="color:#A6ACCD;">($user)))</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> pass </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> crypto::argon2::generate($pass)</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">SIGNIN (</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">type</span><span style="color:#A6ACCD;">::thing(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, string::lowercase(string::</span><span style="color:#82AAFF;">trim</span><span style="color:#A6ACCD;">($user)))</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> crypto::argon2::compare(pass, $pass)</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>::: typ Because we are reusing the id, the username unique constraint is enforced even in a SCHEMALESS table.</p><p>However this also means that username will not be changeable in the future as all relationships will be using the old username as the key. :::</p><p>check info db in REPL</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> INFO FOR DB</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">result</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dl</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: {},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: {},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">sc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">allusers</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DEFINE SCOPE allusers SESSION 2w SIGNUP (CREATE type::thing(</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">, string::lowercase(string::trim(</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">user</span><span style="color:#C3E88D;">))) SET pass = crypto::argon2::generate(</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">pass</span><span style="color:#C3E88D;">)) SIGNIN (SELECT * FROM type::thing(</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">, string::lowercase(string::trim(</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">user</span><span style="color:#C3E88D;">))) WHERE crypto::argon2::compare(pass, </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">pass</span><span style="color:#C3E88D;">))</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">tb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DEFINE TABLE user SCHEMALESS PERMISSIONS NONE</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">status</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">OK</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">time</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">93.978\xB5s</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> SELECT </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> FROM user</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">result</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user:tobie</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pass</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;$</span><span style="color:#A6ACCD;">argon2id</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">v</span><span style="color:#C3E88D;">=19</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">m</span><span style="color:#C3E88D;">=4096,t=3,p=1</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">oFQ8a4HFXjfaadQcOdPlLw</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">MZrA6mNvtvFLuQq1GGhfrGs4wk9iflhKT2rRsZLxwE4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">status</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">OK</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">time</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">125.017\xB5s</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h2 id="test-signin-and-signup-with-javascript-surrealdb-js-integration" tabindex="-1">Test signin and signup with Javascript surrealdb.js integration <a class="header-anchor" href="#test-signin-and-signup-with-javascript-surrealdb-js-integration" aria-hidden="true">#</a></h2><h3 id="signup-a-new-user" tabindex="-1">Signup a new user <a class="header-anchor" href="#signup-a-new-user" aria-hidden="true">#</a></h3><p>use following query from the client</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signup</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">NS</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">my_ns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">DB</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">my_db</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// We want to signup to the &#39;allusers&#39; scope defined above</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">SC</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">allusers</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// We can add any variable here to use in the SIGNUP clause</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tobie</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// We can add any variable here to use in the SIGNUP clause</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">pass</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">some password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// We can add any variable here to use in the SIGNUP clause</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">marketing</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// We can add any variable here to use in the SIGNUP clause</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">tags</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rust</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">golang</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">javascript</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>you should receive a jwt token for ex</p><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJpYXQiOjE2NjQyMjQxMjEsIm5iZiI6MTY2NDIyNDEyMSwiZXhwIjoxNjY1NDMzNzIxLCJpc3MiOiJTdXJyZWFsREIiLCJucyI6InRlc3QiLCJkYiI6InRlc3QiLCJzYyI6ImFsbHVzZXJzIiwiaWQiOiJ1c2VyOmQ4dzR4aHZtY2hxcHh6enl5ZjUyIn0.TWjIEm8z2TeuE27uJ9MvgfCELvOT0hC6e8vlOPUNJMx-lvxYXIYgXXcibdVxEWNQqnXu1gaUOus4KgjsWaUD-A</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="signin-an-existing-user" tabindex="-1">Signin an existing user <a class="header-anchor" href="#signin-an-existing-user" aria-hidden="true">#</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signin</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">NS</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">my_ns</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">DB</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">my_db</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// We want to signup to the &#39;allusers&#39; scope defined above</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">SC</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">allusers</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// We can add any variable here to use in the SIGNUP clause</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tobie</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// We can add any variable here to use in the SIGNUP clause</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">pass</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">some password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>you should receive a jwt token for ex</p><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJpYXQiOjE2NjQyMjQxNjMsIm5iZiI6MTY2NDIyNDE2MywiZXhwIjoxNjY1NDMzNzYzLCJpc3MiOiJTdXJyZWFsREIiLCJucyI6InRlc3QiLCJkYiI6InRlc3QiLCJzYyI6ImFsbHVzZXJzIiwiaWQiOiJ1c2VyOmQ4dzR4aHZtY2hxcHh6enl5ZjUyIn0.kKx_WShYBf9T_sCa_pRldHTG9LyfIx-4q0V4sz2kKzxSG4b_okG-MddTwdqHnsdS7rEJxZ-Gp-iP4cpgo77kqQ</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Source: <a href="https://tutorials.surrealdb.com/community/" target="_blank" rel="noreferrer">https://tutorials.surrealdb.com/community/</a></p>`,30),e=[o];function t(r,c,D,y,C,i){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{A as __pageData,u as default};
